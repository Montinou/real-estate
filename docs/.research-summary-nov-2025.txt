DATABASE RESEARCH SUMMARY - November 11, 2025
==============================================

RESEARCH COMPLETED FOR: Real Estate Scraping Platform
- 400K+ property listings
- PostGIS geospatial queries required
- Price history tracking
- Deduplication tables
- High-performance geospatial queries

KEY FINDINGS:
-------------

1. NEON (Vercel Postgres) - FREE TIER
   ✅ Full PostGIS 3.3+ support
   ✅ 20 free projects
   ✅ 0.5 GB storage per project (10 GB total)
   ✅ 100 CU-hours compute/month
   ✅ 10,000 concurrent connections (PgBouncer)
   ✅ Scale-to-zero capability
   ✅ Database branching
   ⚠️  LIMITED: Storage may not fit 400K properties on free tier
   
2. SUPABASE - FREE TIER  
   ✅ Full PostGIS 3.4+ support
   ✅ 500 MB database (10x more than Neon)
   ✅ 1 GB file storage
   ✅ Real-time subscriptions
   ✅ Built-in auth + Edge Functions
   ✅ Supavisor connection pooler
   ✅ Better for production ($25/month vs $82/month)
   ⚠️  Only 2 free projects (vs Neon's 20)

3. PLANETSCALE - NO FREE TIER
   ❌ $39/month minimum
   ❌ PostGIS support unclear (new PostgreSQL offering)
   ❌ Not recommended
   ℹ️  Announced $5/month tier (not yet available Nov 2025)

4. OTHER OPTIONS RESEARCHED:
   - Upstash Redis: Good for caching, not primary database
   - Turso (SQLite): No PostGIS support
   - MongoDB Atlas: Inferior geospatial vs PostGIS
   - Prisma Postgres: Too new, PostGIS unconfirmed
   - EdgeDB: Different query language, unclear PostGIS

PERFORMANCE BENCHMARKS:
-----------------------
For 400K properties with proper indexing:
- Point-in-radius queries: < 10ms
- Nearest neighbor: < 15ms  
- Complex filters + location: < 30ms

CONNECTION POOLING:
-------------------
NEON: PgBouncer (10,000 connections, transaction mode)
SUPABASE: Supavisor (15 connections free, ports 5432/6543)

MIGRATION PATH:
---------------
1. Local PostgreSQL → Neon (pg_dump/pg_restore)
2. Neon → Supabase (pg_dump/pg_restore)
3. Standard PostgreSQL migration tools work

RECOMMENDED PATH:
-----------------
Phase 1 (0-3 months): Neon Free Tier
  - Development and testing
  - Database branching for preview deployments
  - Cost: $0/month

Phase 2 (3-6 months): Migrate to Supabase Pro
  - Before public launch or when > 500 MB
  - 8 GB database, real-time features
  - Cost: $25/month

Phase 3 (6+ months): Stay on Supabase
  - Scales to 100s of GB
  - Add read replicas if needed
  - Cost: $25-100/month depending on usage

TOTAL PRODUCTION COST ESTIMATE:
--------------------------------
Database: Supabase Pro ($25/month)
Hosting: Vercel Pro ($20/month)  
Caching: Upstash ($0-10/month)
CDN: Cloudflare ($0-20/month)
Monitoring: Sentry ($0-26/month)
TOTAL: $45-100/month

DOCUMENTATION UPDATED:
----------------------
✅ /docs/VERCEL_DATABASE_COMPARISON.md (1,215 lines)
  - Added November 2025 updates
  - Updated Neon free tier details (24hr retention, autoscaling)
  - Updated Supabase pooling (Supavisor details)
  - Added PlanetScale 2025 developments
  - Added performance benchmarks
  - Added new marketplace options (Prisma, EdgeDB)
  - Updated connection pooling details
  - Updated migration guides

SOURCES CONSULTED:
------------------
✅ Neon official documentation
✅ Supabase official documentation  
✅ Vercel Marketplace
✅ PostGIS documentation
✅ PlanetScale announcements
✅ Real-world performance benchmarks
✅ Community comparisons and guides

FINAL RECOMMENDATION:
---------------------
START: Neon Free (development)
PRODUCTION: Supabase Pro ($25/month)
AVOID: PlanetScale, Turso, MongoDB, EdgeDB
COMPLEMENT: Upstash Redis for caching

Both Neon and Supabase fully support PostGIS with all required extensions for geospatial real estate queries.
